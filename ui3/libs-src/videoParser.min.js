function _typeof(d){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(d)}function _classCallCheck(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function");}
function _defineProperties(d,a){for(var h=0;h<a.length;h++){var g=a[h];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(d,_toPropertyKey(g.key),g)}}function _createClass(d,a,h){return a&&_defineProperties(d.prototype,a),h&&_defineProperties(d,h),Object.defineProperty(d,"prototype",{writable:!1}),d}function _toPropertyKey(d){d=_toPrimitive(d,"string");return"symbol"==_typeof(d)?d:d+""}
function _toPrimitive(d,a){if("object"!=_typeof(d)||!d)return d;var h=d[Symbol.toPrimitive];if(void 0!==h){d=h.call(d,a||"default");if("object"!=_typeof(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===a?String:Number)(d)}
var UI3BitReader=function(){function d(a){_classCallCheck(this,d);this.bytes=this.removeEmulationPreventionBytes(a);this.bitOffset=this.byteOffset=0}return _createClass(d,[{key:"removeEmulationPreventionBytes",value:function(a){for(var h=[],g=0;g<a.length;g++)g>1&&a[g]===3&&a[g-1]===0&&a[g-2]===0||h.push(a[g]);return new Uint8Array(h)}},{key:"readBit",value:function(){if(this.byteOffset>=this.bytes.length)throw Error("Out of range");var a=this.bytes[this.byteOffset]>>7-this.bitOffset&1;this.bitOffset++;
this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++);return a}},{key:"readBits",value:function(a){for(var h=0,g=0;g<a;g++)h=h<<1|this.readBit();return h}},{key:"readUE",value:function(){for(var a=0;this.readBit()===0;)a++;return(1<<a)-1+this.readBits(a)}},{key:"readSE",value:function(){var a=this.readUE();return(a&1?1:-1)*Math.ceil(a/2)}},{key:"bitsRemaining",value:function(){return this.bytes.length*8-(this.byteOffset*8+this.bitOffset)}},{key:"skipBits",value:function(a){this.byteOffset+=Math.floor(a/
8);this.bitOffset+=a%8}}])}(),UI3_VideoParser=new function(){var d=this;this.getNalTypeName=function(a,h){if(h)switch(a){case 0:return"TRAIL_N";case 1:return"TRAIL_R";case 19:return"IDR_W_RADL";case 20:return"IDR_N_LP";case 21:return"CRA";case 32:return"VPS";case 33:return"SPS";case 34:return"PPS";case 35:return"AUD";case 39:return"SEI";case 40:return"SEI2"}else switch(a){case 1:return"NDR";case 5:return"IDR";case 6:return"SEI";case 7:return"SPS";case 8:return"PPS";case 9:return"AUD"}};this.parseNALUnits=
function(a,h){var g=[],b=0;if(a[0]===0&&a[1]===0&&(a[2]===1||a[2]===0&&a[3]===1))for(;b<a.length;){for(var c=-1;b<a.length-3;b++)if(a[b]===0&&a[b+1]===0&&(a[b+2]===1||a[b+2]===0&&a[b+3]===1)){c=b;break}if(c<0)break;c+=a[c+2]===1?3:4;b=a.length;for(var e=c;e<a.length-3;e++)if(a[e]===0&&a[e+1]===0&&(a[e+2]===1||a[e+2]===0&&a[e+3]===1)){b=e;break}c=a.slice(c,b);c.length>0&&(e=c[0],e=h?e>>1&63:e&31,c={type:e,type_name:d.getNalTypeName(e,h),data:c},g.push(c))}else for(;b+4<=a.length;){c=a[b]<<24|a[b+1]<<
16|a[b+2]<<8|a[b+3];b+=4;if(c<=0||b+c>a.length)break;e=a.slice(b,b+c);var k=e[0];k=h?k>>1&63:k&31;g.push({type:k,type_name:d.getNalTypeName(k,h),data:e});b+=c}for(a=0;a<g.length;a++)b=g[a],h?b.type===33&&(b.sps=UI3_H265Parser.parseSPS(b.data)):b.type===7?b.sps=UI3_H264Parser.parseSPS(b.data):b.type===8&&(b.pps=UI3_H264Parser.parsePPS(b.data));return g}},UI3_H264Parser=new function(){function d(b){var c={};c.cpb_cnt_minus1=b.readUE();c.bit_rate_scale=b.readBits(4);c.cpb_size_scale=b.readBits(4);c.cpb=
[];for(var e=0;e<=c.cpb_cnt_minus1;e++){var k={bit_rate_value_minus1:b.readUE(),cpb_size_value_minus1:b.readUE(),cbr_flag:b.readBit()};c.cpb.push(k)}c.initial_cpb_removal_delay_length_minus1=b.readBits(5);c.cpb_removal_delay_length_minus1=b.readBits(5);c.dpb_output_delay_length_minus1=b.readBits(5);c.time_offset_length=b.readBits(5);return c}function a(b){var c={};try{if(b.bitsRemaining()<=0)return c;c.aspect_ratio_info_present_flag=b.readBit();c.aspect_ratio_info_present_flag&&(c.aspect_ratio_idc=
b.readBits(8),c.aspect_ratio_idc===255&&(c.sar_width=b.readBits(16),c.sar_height=b.readBits(16)));if(b.bitsRemaining()<=0)return c;c.overscan_info_present_flag=b.readBit();c.overscan_info_present_flag&&(c.overscan_appropriate_flag=b.readBit());if(b.bitsRemaining()<=0)return c;c.video_signal_type_present_flag=b.readBit();c.video_signal_type_present_flag&&(c.video_format=b.readBits(3),c.video_full_range_flag=b.readBit(),c.colour_description_present_flag=b.readBit(),c.colour_description_present_flag&&
(c.colour_primaries=b.readBits(8),c.transfer_characteristics=b.readBits(8),c.matrix_coefficients=b.readBits(8)));if(b.bitsRemaining()<=0)return c;c.chroma_loc_info_present_flag=b.readBit();c.chroma_loc_info_present_flag&&(c.chroma_sample_loc_type_top_field=b.readUE(),c.chroma_sample_loc_type_bottom_field=b.readUE());if(b.bitsRemaining()<=0)return c;c.timing_info_present_flag=b.readBit();c.timing_info_present_flag&&(c.num_units_in_tick=b.readBits(32),c.time_scale=b.readBits(32),c.fixed_frame_rate_flag=
b.readBit(),c.num_units_in_tick&&c.time_scale&&(c.derived_fps=c.time_scale/(2*c.num_units_in_tick)));if(b.bitsRemaining()<=0)return c;c.nal_hrd_parameters_present_flag=b.readBit();c.nal_hrd_parameters_present_flag&&(c.nal_hrd=d(b));if(b.bitsRemaining()<=0)return c;c.vcl_hrd_parameters_present_flag=b.readBit();c.vcl_hrd_parameters_present_flag&&(c.vcl_hrd=d(b));if(c.nal_hrd_parameters_present_flag||c.vcl_hrd_parameters_present_flag)c.low_delay_hrd_flag=b.readBit();if(b.bitsRemaining()<=0)return c;
c.pic_struct_present_flag=b.readBit();if(b.bitsRemaining()<=0)return c;c.bitstream_restriction_flag=b.readBit();c.bitstream_restriction_flag&&(c.motion_vectors_over_pic_boundaries_flag=b.readBit(),c.max_bytes_per_pic_denom=b.readUE(),c.max_bits_per_mb_denom=b.readUE(),c.log2_max_mv_length_horizontal=b.readUE(),c.log2_max_mv_length_vertical=b.readUE(),c.max_num_reorder_frames=b.readUE(),c.max_dec_frame_buffering=b.readUE());if(c.aspect_ratio_info_present_flag&&c.aspect_ratio_idc!==255){var e={1:[1,
1],2:[12,11],3:[10,11],4:[16,11],5:[40,33],6:[24,11],7:[20,11],8:[32,11],9:[80,33],10:[18,11],11:[15,11],12:[64,33],13:[160,99],14:[4,3],15:[3,2],16:[2,1]}[c.aspect_ratio_idc];e&&(c.sar_width=e[0],c.sar_height=e[1])}}catch(k){console.warn("Error parsing VUI:",k)}return c}function h(b){switch(b){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High 10";case 122:return"High 4:2:2";case 244:return"High 4:4:4 Predictive";case 44:return"CAVLC 4:4:4 Intra";
case 83:return"Scalable Baseline";case 86:return"Scalable High";case 118:return"Multiview High";case 128:return"Stereo High";default:return"Unknown ("+b+")"}}function g(b){switch(b){case 0:return"Monochrome (no chroma)";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown ("+b+")"}}this.parseSPS=function(b){var c=new UI3BitReader(b);c.skipBits(8);b={h264:!0};try{b.profile_idc=c.readBits(8);b.constraint_set_flags=c.readBits(8);b.level_idc=c.readBits(8);b.profileName=
h(b.profile_idc);var e=b.level_idc;b.levelName=Math.floor(e/10)+"."+e%10;var k=b.profile_idc;e=[];k&128&&e.push("0");k&64&&e.push("1");k&32&&e.push("2");k&16&&e.push("3");k&8&&e.push("4");k&4&&e.push("5");var m=e.length?e.join(","):"none";b.constraints=m;b.summary="Profile: "+b.profileName+", Level: "+b.levelName+(b.constraint_set_flags===0?"":", Constraints: "+b.constraints);b.seq_parameter_set_id=c.readUE();(new Set([100,110,122,244,44,83,86,118,128,138,139,134])).has(b.profile_idc)?(b.chroma_format_idc=
c.readUE(),b.chroma_format_idc===3&&(b.separate_colour_plane_flag=c.readBit()),b.bit_depth_luma_minus8=c.readUE(),b.bit_depth_chroma_minus8=c.readUE(),b.qpprime_y_zero_transform_bypass_flag=c.readBit(),b.seq_scaling_matrix_present_flag=c.readBit()):b.chroma_format_idc=1;b.chroma=g(b.chroma_format_idc);b.log2_max_frame_num_minus4=c.readUE();b.pic_order_cnt_type=c.readUE();if(b.pic_order_cnt_type===0)b.log2_max_pic_order_cnt_lsb_minus4=c.readUE();else if(b.pic_order_cnt_type===1){b.delta_pic_order_always_zero_flag=
c.readBit();b.offset_for_non_ref_pic=c.readSE();b.offset_for_top_to_bottom_field=c.readSE();var p=c.readUE();b.offset_for_ref_frame=[];for(m=0;m<p;m++)b.offset_for_ref_frame.push(c.readSE())}b.max_num_ref_frames=c.readUE();b.gaps_in_frame_num_value_allowed_flag=c.readBit();b.pic_width_in_mbs_minus1=c.readUE();b.pic_height_in_map_units_minus1=c.readUE();b.frame_mbs_only_flag=c.readBit();b.frame_mbs_only_flag||(b.mb_adaptive_frame_field_flag=c.readBit());b.direct_8x8_inference_flag=c.readBit();b.frame_cropping_flag=
c.readBit();b.frame_cropping_flag&&(b.frame_crop_left_offset=c.readUE(),b.frame_crop_right_offset=c.readUE(),b.frame_crop_top_offset=c.readUE(),b.frame_crop_bottom_offset=c.readUE());b.vui_parameters_present_flag=c.readBit();b.vui_parameters_present_flag&&(b.vui=a(c));var q=(b.pic_width_in_mbs_minus1+1)*16,l=(b.frame_mbs_only_flag?1:2)*(b.pic_height_in_map_units_minus1+1)*16;if(b.frame_cropping_flag){var f=b.chroma_format_idc;p=f===0?1:f===1||f===2?2:1;var r=f===0?2-b.frame_mbs_only_flag:(f===1?2:
1)*(2-b.frame_mbs_only_flag),t=b.frame_crop_top_offset*r,u=b.frame_crop_bottom_offset*r;q-=b.frame_crop_left_offset*p+b.frame_crop_right_offset*p;l-=t+u}b.width=q;b.height=l;b.vui&&b.vui.sar_width&&b.vui.sar_height&&(b.sample_aspect_ratio=b.vui.sar_width/b.vui.sar_height,b.display_width=Math.round(q*b.sample_aspect_ratio),b.display_height=l);b.vui&&typeof b.vui.derived_fps==="number"&&(b.fps=b.vui.derived_fps)}catch(v){console.warn("Error parsing SPS:",v)}return b};this.parsePPS=function(b){var c=
new UI3BitReader(b);c.skipBits(8);var e={h264:!0};try{e.pic_parameter_set_id=c.readUE();e.seq_parameter_set_id=c.readUE();e.entropy_coding_mode_flag=c.readBit();e.bottom_field_pic_order_in_frame_present_flag=c.readBit();var k=c.readUE();e.num_slice_groups_minus1=k;k>0&&(e.slice_group_map_type=c.readUE());e.num_ref_idx_l0_default_active_minus1=c.readUE();e.num_ref_idx_l1_default_active_minus1=c.readUE();e.weighted_pred_flag=c.readBit();e.weighted_bipred_idc=c.readBits(2);e.pic_init_qp_minus26=c.readSE();
e.pic_init_qs_minus26=c.readSE();e.chroma_qp_index_offset=c.readSE();e.deblocking_filter_control_present_flag=c.readBit();e.constrained_intra_pred_flag=c.readBit();e.redundant_pic_cnt_present_flag=c.readBit();if(c.bitsRemaining()<=0)return e;c.byteOffset<b.length&&(e.transform_8x8_mode_flag=c.readBit(),e.pic_scaling_matrix_present_flag=c.readBit())}catch(m){console.warn("Error parsing PPS:",m)}return e}},UI3_H265Parser=new function(){this.parseSPS=function(d){var a=new UI3BitReader(d);a.skipBits(16);
d={h265:!0};try{d.sps_video_parameter_set_id=a.readBits(4);d.sps_max_sub_layers_minus1=a.readBits(3);d.sps_temporal_id_nesting_flag=a.readBit();var h=d.sps_max_sub_layers_minus1,g={};g.general_profile_space=a.readBits(2);g.general_tier_flag=a.readBit();g.general_profile_idc=a.readBits(5);g.general_profile_compatibility_flags=a.readBits(32);g.general_progressive_source_flag=a.readBit();g.general_interlaced_source_flag=a.readBit();g.general_non_packed_constraint_flag=a.readBit();g.general_frame_only_constraint_flag=
a.readBit();g.general_reserved_zero_44bits_hi=a.readBits(16);g.general_reserved_zero_44bits_lo=a.readBits(28);g.general_level_idc=a.readBits(8);g.sub_layer_profile_present_flag=[];g.sub_layer_level_present_flag=[];for(var b=0;b<h;b++)g.sub_layer_profile_present_flag[b]=a.readBit(),g.sub_layer_level_present_flag[b]=a.readBit();if(h>0)for(b=h;b<8;b++)a.readBits(2);g.sub_layers=[];for(b=0;b<h;b++){var c={};g.sub_layer_profile_present_flag[b]&&(c.sub_layer_profile_space=a.readBits(2),c.sub_layer_tier_flag=
a.readBit(),c.sub_layer_profile_idc=a.readBits(5),c.sub_layer_profile_compatibility_flags=a.readBits(32),c.sub_layer_progressive_source_flag=a.readBit(),c.sub_layer_interlaced_source_flag=a.readBit(),c.sub_layer_non_packed_constraint_flag=a.readBit(),c.sub_layer_frame_only_constraint_flag=a.readBit(),c.sub_layer_reserved_zero_44bits_hi=a.readBits(16),c.sub_layer_reserved_zero_44bits_lo=a.readBits(28));g.sub_layer_level_present_flag[b]&&(c.sub_layer_level_idc=a.readBits(8));g.sub_layers[b]=c}d.profile_tier_level=
g;d.sps_seq_parameter_set_id=a.readUE();d.chroma_format_idc=a.readUE();d.chroma_format_idc===3&&(d.separate_colour_plane_flag=a.readBit());d.pic_width_in_luma_samples=a.readUE();d.pic_height_in_luma_samples=a.readUE();d.conformance_window_flag=a.readBit();d.conformance_window_flag&&(d.conf_win_left_offset=a.readUE(),d.conf_win_right_offset=a.readUE(),d.conf_win_top_offset=a.readUE(),d.conf_win_bottom_offset=a.readUE());d.bit_depth_luma_minus8=a.readUE();d.bit_depth_chroma_minus8=a.readUE();d.log2_max_pic_order_cnt_lsb_minus4=
a.readUE();d.sps_sub_layer_ordering_info_present_flag=a.readBit();var e=d.sps_sub_layer_ordering_info_present_flag?d.sps_max_sub_layers_minus1+1:1;d.sub_layer_ordering=[];for(h=0;h<e;h++)d.sub_layer_ordering[h]={sps_max_dec_pic_buffering_minus1:a.readUE(),sps_max_num_reorder_pics:a.readUE(),sps_max_latency_increase_plus1:a.readUE()};d.log2_min_luma_coding_block_size_minus3=a.readUE();d.log2_diff_max_min_luma_coding_block_size=a.readUE();d.log2_min_transform_block_size_minus2=a.readUE();d.log2_diff_max_min_transform_block_size=
a.readUE();d.max_transform_hierarchy_depth_inter=a.readUE();d.max_transform_hierarchy_depth_intra=a.readUE();d.scaling_list_enabled_flag=a.readBit();if(d.scaling_list_enabled_flag&&(d.sps_scaling_list_data_present_flag=a.readBit(),d.sps_scaling_list_data_present_flag)){e={scaling_list:[]};for(h=0;h<4;h++)for(g=h===3?2:6,e.scaling_list[h]=[],b=0;b<g;b++){var k=a.readBit();c={scaling_list_pred_mode_flag:k};if(k){var m=Math.min(64,1<<4+(h<<1)),p=8;h>1&&(c.scaling_list_dc_coef_minus8=a.readSE(),p=c.scaling_list_dc_coef_minus8+
8);c.scaling_list=[];for(var q=0;q<m;q++){var l=a.readSE();p=p+l+256&255;c.scaling_list[q]=p}}else c.scaling_list_pred_matrix_id_delta=a.readUE();e.scaling_list[h][b]=c}d.scaling_list_data=e}d.amp_enabled_flag=a.readBit();d.sample_adaptive_offset_enabled_flag=a.readBit();d.pcm_enabled_flag=a.readBit();d.pcm_enabled_flag&&(d.pcm_sample_bit_depth_luma_minus1=a.readBits(4),d.pcm_sample_bit_depth_chroma_minus1=a.readBits(4),d.log2_min_pcm_luma_coding_block_size_minus3=a.readUE(),d.log2_diff_max_min_pcm_luma_coding_block_size=
a.readUE(),d.pcm_loop_filter_disabled_flag=a.readBit());d.num_short_term_ref_pic_sets=a.readUE();var f=d.num_short_term_ref_pic_sets;k=[];for(m=0;m<f;m++){l={};var r=m!==0?a.readBit():0;if(l.inter_ref_pic_set_prediction_flag=r){var t=m===0?0:a.readUE();l.delta_idx_minus1=t;l.delta_rps_sign=a.readBit();l.abs_delta_rps_minus1=a.readUE();var u=k[m-1-t],v=(u.num_negative_pics||0)+(u.num_positive_pics||0);l.used_by_curr_pic_flag=[];l.use_delta_flag=[];for(e=0;e<=v;e++){var w=a.readBit();l.used_by_curr_pic_flag.push(w);
var y=w?1:a.readBit();l.use_delta_flag.push(y)}}else{l.num_negative_pics=a.readUE();l.num_positive_pics=a.readUE();l.delta_poc_s0_minus1=[];l.used_by_curr_pic_s0_flag=[];for(e=0;e<l.num_negative_pics;e++)l.delta_poc_s0_minus1[e]=a.readUE(),l.used_by_curr_pic_s0_flag[e]=a.readBit();l.delta_poc_s1_minus1=[];l.used_by_curr_pic_s1_flag=[];for(e=0;e<l.num_positive_pics;e++)l.delta_poc_s1_minus1[e]=a.readUE(),l.used_by_curr_pic_s1_flag[e]=a.readBit()}k.push(l)}d.st_ref_pic_sets=k;d.long_term_ref_pics_present_flag=
a.readBit();if(d.long_term_ref_pics_present_flag)for(d.num_long_term_ref_pics_sps=a.readUE(),d.lt_ref_pic=[],f=0;f<d.num_long_term_ref_pics_sps;f++)d.lt_ref_pic.push({lt_ref_pic_poc_lsb_sps:a.readBits(d.log2_max_pic_order_cnt_lsb_minus4+4),used_by_curr_pic_lt_sps_flag:a.readBit()});d.sps_temporal_mvp_enabled_flag=a.readBit();d.strong_intra_smoothing_enabled_flag=a.readBit();d.vui_parameters_present_flag=a.readBit();if(d.vui_parameters_present_flag){f={};f.aspect_ratio_info_present_flag=a.readBit();
f.aspect_ratio_info_present_flag&&(f.aspect_ratio_idc=a.readBits(8),f.aspect_ratio_idc===255&&(f.sar_width=a.readBits(16),f.sar_height=a.readBits(16)));f.overscan_info_present_flag=a.readBit();f.overscan_info_present_flag&&(f.overscan_appropriate_flag=a.readBit());f.video_signal_type_present_flag=a.readBit();f.video_signal_type_present_flag&&(f.video_format=a.readBits(3),f.video_full_range_flag=a.readBit(),f.colour_description_present_flag=a.readBit(),f.colour_description_present_flag&&(f.colour_primaries=
a.readBits(8),f.transfer_characteristics=a.readBits(8),f.matrix_coeffs=a.readBits(8)));f.chroma_loc_info_present_flag=a.readBit();f.chroma_loc_info_present_flag&&(f.chroma_sample_loc_type_top_field=a.readUE(),f.chroma_sample_loc_type_bottom_field=a.readUE());f.neutral_chroma_indication_flag=a.readBit();f.field_seq_flag=a.readBit();f.frame_field_info_present_flag=a.readBit();f.default_display_window_flag=a.readBit();f.default_display_window_flag&&(f.def_disp_win_left_offset=a.readUE(),f.def_disp_win_right_offset=
a.readUE(),f.def_disp_win_top_offset=a.readUE(),f.def_disp_win_bottom_offset=a.readUE());f.vui_timing_info_present_flag=a.readBit();if(f.vui_timing_info_present_flag&&(f.vui_num_units_in_tick=a.readBits(32),f.vui_time_scale=a.readBits(32),f.vui_poc_proportional_to_timing_flag=a.readBit(),f.vui_poc_proportional_to_timing_flag&&(f.vui_num_ticks_poc_diff_one_minus1=a.readUE()),f.vui_hrd_parameters_present_flag=a.readBit(),f.vui_hrd_parameters_present_flag)){r=[];var A=a.readBits(4),C=a.readBits(4),D=
a.readBits(5),E=a.readBits(5),F=a.readBits(5),B=a.readBit();v=u=t=0;B&&(t=a.readBits(8),a.readBits(5),a.readBit(),u=a.readBits(5),v=a.readBits(5));w=[];y=[];for(k=0;k<=d.sps_max_sub_layers_minus1;k++){w[k]=a.readBit();m=!1;w[k]?m=!0:(y[k]=a.readBit(),m=y[k]);m?a.readUE():a.readBit();r[k]=a.readUE();var G=a.readBit(),H=a.readBit();m=0;for(l=[G,H];m<l.length;m++)if(l[m])for(e=0;e<=r[k];e++)a.readUE(),a.readUE(),B&&(a.readUE(),a.readUE()),a.readBit()}f.hrd={bitRateScale:A,cpbSizeScale:C,initialCpbRemovalDelayLengthMinus1:D,
auCpbRemovalDelayLengthMinus1:E,dpbOutputDelayLengthMinus1:F,subPicHrdParamsPresentFlag:B,tickDivisorMinus2:t,duCpbRemovalDelayLengthMinus1:u,dpbOutputDelayDuLengthMinus1:v}}f.bitstream_restriction_flag=a.readBit();f.bitstream_restriction_flag&&(f.tiles_fixed_structure_flag=a.readBit(),f.motion_vectors_over_pic_boundaries_flag=a.readBit(),f.restricted_ref_pic_lists_flag=a.readBit(),f.min_spatial_segmentation_idc=a.readUE(),f.max_bytes_per_pic_denom=a.readUE(),f.max_bits_per_min_cu_denom=a.readUE(),
f.log2_max_mv_length_horizontal=a.readUE(),f.log2_max_mv_length_vertical=a.readUE());d.vui=f}var z=d.pic_width_in_luma_samples,x=d.pic_height_in_luma_samples;if(d.conformance_window_flag){var n=d.chroma_format_idc;A=n===1?2:1;z-=(d.conf_win_left_offset+d.conf_win_right_offset)*(n===1||n===2?2:1);x-=(d.conf_win_top_offset+d.conf_win_bottom_offset)*A}d.width=z;d.height=x}catch(I){console.warn("Error parsing H.265 SPS:",I)}d.profile_tier_level&&(n=d.profile_tier_level,z={1:"Main",2:"Main 10",3:"Main Still Picture",
4:"Range Extensions",5:"High Throughput 4:4:4",6:"Multiview Main",7:"Scalable Main",8:"3D Main",9:"Screen-Extended Main",10:"Screen-Extended Main 10",11:"Screen-Extended 4:4:4"}[n.general_profile_idc]||"Profile ".concat(n.general_profile_idc),x=n.general_tier_flag?"High":"",n=(n.general_level_idc/30).toFixed(1),d.description=z+" L"+n+" "+(x?x+" Tier":""));return d}};
